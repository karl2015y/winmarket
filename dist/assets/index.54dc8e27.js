var T=Object.defineProperty;var B=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var F=(d,e,s)=>e in d?T(d,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[e]=s,M=(d,e)=>{for(var s in e||(e={}))z.call(e,s)&&F(d,s,e[s]);if(B)for(var s of B(e))R.call(e,s)&&F(d,s,e[s]);return d};import{D as m,a4 as U,Q as I,U as J,an as Q,ae as Z,af as q,ao as G,a1 as K,a3 as P,m as D,n as p,s as r,w as l,t as V,o as n,F as E,Z as O,v as i,x as f,H as g,a5 as A,$ as j,a0 as H}from"./vendor.2e9f8f3e.js";/* empty css                  *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                   */import{_ as W,e as N,d as X,f as Y,c as $}from"./index.4c5df9d9.js";import{d as ee}from"./vuedraggable.umd.15e797dc.js";const te={name:"pageSet",components:M({draggable:ee},N),setup(){const d=m(U().params.page_id),e=m([]),s=m({type:"",id:"",data:null,sort:0}),t=()=>{const a=JSON.parse(JSON.stringify(s.value));a.sort=e.value.length+1,e.value.push(a),o(),h.value=!1},L=m(!1),h=m(!1),_=()=>{let a=Date.now();return typeof performance!="undefined"&&typeof performance.now=="function"&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){let x=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(c==="x"?x:x&3|8).toString(16)})},w=m(Object.keys(N).map(a=>({label:a,value:a}))),k=()=>{h.value=!0,s.value=JSON.parse(JSON.stringify({type:"",id:_(),data:null,sort:0}))},b=()=>{h.value=!1},v=a=>{X(["pages",d.value,"components_list",e.value[a].id]).then(()=>{e.value.splice(a,1)})},y=m(!0),C=I("smoothScroll"),S=a=>{const c=document.getElementById(`${a}`);C({scrollTo:c,hash:`#${a}`}),setTimeout(()=>{c.classList.add("animate__animated","animate__headShake","animate__fast")},600),setTimeout(()=>{c.classList.remove("animate__animated","animate__headShake","animate__fast")},1600)},o=()=>{Y(["pages",d.value,"components_list"],e.value).then(()=>{alert("\u66F4\u65B0\u6210\u529F")})},u=()=>{$(["pages",d.value,"components_list"]).then(a=>{e.value=a.sort((c,x)=>c.sort-x.sort)})};return J(()=>{u()}),{components_list:e,showAddComponentsForm:h,component_base:s,fullscreenComponentsForm:L,showAddComponentsFormHandler:k,hiddenAddComponentsFormHandler:b,addComponentsHandler:t,components:w,deleteComponentHandler:v,updateComponentsDataHandler:o,scroll2ViewHandler:S,showComponentsListStatus:y,page_id:d}}},oe=n("div",null,[n("svg",{class:"cursor-pointer w-10 h-10 border-solid border shadow rounded text-gray-300 hover:text-gray-500 hover:shadow-xl",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),ne={class:"p-1.5"},ae=n("h2",{class:"mb-2"},"\u5143\u4EF6\u985E\u5225",-1),se={key:1,class:"border-solid border"},le={class:"dialog-footer"},re=H("\u53D6\u6D88"),de=H("\u65B0\u589E"),ie={key:0,class:"fixed z-[3000] bg-gray-100 px-4 pt-4 pb-8 top-5 right-0 shadow"},ce={class:"w-full flex justify-between items-end mb-4"},me=n("svg",{class:"cursor-pointer w-6 h-6 border-solid border shadow rounded text-gray-300 hover:text-gray-500 hover:shadow-xl",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1),pe=[me],_e=n("span",{class:"text-xs text-gray-500 mr-1"},"\u6700\u5F8C\u66F4\u65B0\u6642\u9593\uFF1A2022/1/26 16:28",-1),ue=H("\u5132\u5B58"),fe={class:"flex justify-start items-center hover:bg-white rounded-sm"},he=n("button",{class:"handle cursor-move ml-3"},[n("svg",{class:"h-auto w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})])],-1),ve=["onClick"],xe={class:"ml-auto flex gap-1"},ge=n("button",{class:"bg-blue-500 text-white rounded-full p-1 hover:bg-blue-700 flex items-center"},[n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),we=["onClick"],ke=n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),be=[ke],ye=n("div",null,[n("svg",{class:"cursor-pointer w-10 h-10 border-solid border shadow rounded text-gray-300 hover:text-gray-500 hover:shadow-xl",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})])],-1);function Ce(d,e,s,t,L,h){const _=Q,w=Z,k=q,b=G,v=K,y=P,C=D("router-link"),S=D("draggable");return i(),p("div",null,[r(V,{"enter-active-class":"animate__animated animate__fadeInRight animate__faster","leave-active-class":"animate__animated animate__fadeOutRight animate__faster"},{default:l(()=>[t.showAddComponentsForm?f("",!0):(i(),p("div",{key:0,class:"fixed z-10 bg-gray-100 top-20 right-0 p-1",onClick:e[0]||(e[0]=o=>t.showAddComponentsFormHandler())},[r(_,{class:"box-item",effect:"dark",content:"\u65B0\u589E\u5143\u4EF6",placement:"left"},{default:l(()=>[oe]),_:1})]))]),_:1}),r(y,{modelValue:t.showAddComponentsForm,"onUpdate:modelValue":e[5]||(e[5]=o=>t.showAddComponentsForm=o),title:`\u65B0\u589E\u5143\u4EF6 id:${t.component_base.id}`,fullscreen:t.fullscreenComponentsForm},{footer:l(()=>[n("span",le,[r(v,{onClick:e[3]||(e[3]=o=>t.hiddenAddComponentsFormHandler())},{default:l(()=>[re]),_:1}),r(v,{type:"primary",onClick:e[4]||(e[4]=o=>t.addComponentsHandler())},{default:l(()=>[de]),_:1})])]),default:l(()=>[n("div",ne,[ae,r(k,{modelValue:t.component_base.type,"onUpdate:modelValue":e[1]||(e[1]=o=>t.component_base.type=o),class:"m-2",placeholder:"\u8ACB\u9078\u64C7\u65B0\u589E\u7684\u5143\u4EF6\u985E\u5225"},{default:l(()=>[(i(!0),p(E,null,O(t.components,o=>(i(),g(w,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t.component_base.type?(i(),g(b,{key:0,modelValue:t.fullscreenComponentsForm,"onUpdate:modelValue":e[2]||(e[2]=o=>t.fullscreenComponentsForm=o),class:"mb-2","active-text":"\u5168\u87A2\u5E55\u9810\u89BD","inactive-text":"\u8996\u7A97\u9810\u89BD"},null,8,["modelValue"])):f("",!0),t.component_base.type?(i(),p("div",se)):f("",!0),t.component_base.type?(i(),g(A(t.component_base.type),{key:2})):f("",!0)])]),_:1},8,["modelValue","title","fullscreen"]),n("div",null,[r(V,{"enter-active-class":"animate__animated animate__fadeInRight","leave-active-class":"animate__animated animate__fadeOutRight"},{default:l(()=>[t.components_list.length>0&&t.showComponentsListStatus?(i(),p("div",ie,[n("div",ce,[n("div",{onClick:e[6]||(e[6]=o=>t.showComponentsListStatus=!1)},pe),n("div",null,[_e,r(v,{onClick:e[7]||(e[7]=o=>t.updateComponentsDataHandler()),type:"primary"},{default:l(()=>[ue]),_:1})])]),n("ul",null,[r(S,{modelValue:t.components_list,"onUpdate:modelValue":e[8]||(e[8]=o=>t.components_list=o),"item-key":"index",handle:".handle"},{item:l(({element:o,index:u})=>[n("li",fe,[he,n("div",{class:"mx-3 cursor-pointer",onClick:a=>t.scroll2ViewHandler(o.id)},j(o.sort=u+1)+". "+j(o.type)+" ("+j(o.id)+") ",9,ve),n("div",xe,[r(_,{effect:"dark",content:"\u7DE8 \u8F2F",placement:"top"},{default:l(()=>[r(C,{to:{name:"pageEditor",params:{page_id:t.page_id,component_type:o.type,component_id:o.id}}},{default:l(()=>[ge]),_:2},1032,["to"])]),_:2},1024),r(_,{effect:"dark",content:"\u522A \u9664",placement:"top"},{default:l(()=>[n("button",{class:"bg-red-500 text-white rounded-full p-1 hover:bg-red-700 flex items-center",onClick:a=>t.deleteComponentHandler(u)},be,8,we)]),_:2},1024)])])]),_:1},8,["modelValue"])])])):f("",!0)]),_:1}),r(V,{"enter-active-class":"animate__animated animate__fadeInLeftBig animate__fast","leave-active-class":"animate__animated animate__fadeOutLeftBig animate__slow"},{default:l(()=>[t.showComponentsListStatus?f("",!0):(i(),p("div",{key:0,class:"fixed z-10 bg-gray-100 top-5 right-0 p-1",onClick:e[9]||(e[9]=o=>t.showComponentsListStatus=!0)},[r(_,{class:"box-item",effect:"dark",content:"\u5C55\u958B\u5143\u4EF6\u5217\u8868",placement:"left"},{default:l(()=>[ye]),_:1})]))]),_:1})]),(i(!0),p(E,null,O(t.components_list,(o,u)=>(i(),g(A(o.type),{key:u,id:o.id,data:o.data},null,8,["id","data"]))),128))])}var Ee=W(te,[["render",Ce]]);export{Ee as default};
